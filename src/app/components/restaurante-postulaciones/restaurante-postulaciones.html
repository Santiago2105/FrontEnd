<div class="module-container">

  <div class="header-row">
    <div>
      <h2>Postulaciones recibidas</h2>
      <p class="subtitle">
        Revisa y gestiona las postulaciones de artistas a tus anuncios.
      </p>
    </div>
  </div>

  <div *ngIf="loading" class="info-msg">Cargando postulaciones...</div>
  <div *ngIf="error" class="error-msg">{{ error }}</div>

  <div *ngIf="!loading && !error">

    <div *ngIf="mensaje && postulaciones.length === 0" class="empty-state">
      <p>{{ mensaje }}</p>
    </div>

    <table *ngIf="postulaciones.length > 0" class="module-table">
      <thead>
      <tr>
        <th>Mensaje</th>
        <th>Fecha de postulaci√≥n</th>
        <th>ID Anuncio</th>
        <th>Estado</th>
        <th class="col-acciones">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let p of postulaciones">
        <td class="col-mensaje">{{ p.mensaje }}</td>
        <td>{{ p.fechaPostulacion | date: 'yyyy-MM-dd' }}</td>
        <td>{{ p.anuncioId }}</td>
        <td>
            <span
              class="badge"
              [ngClass]="p.aceptada ? 'badge-success' : 'badge-warning'"
            >
              {{ p.aceptada ? 'Aceptada' : 'No aceptada' }}
            </span>
        </td>
        <td class="col-acciones">
          <button
            class="btn-link"
            (click)="cambiarEstado(p, true)"
            [disabled]="p.aceptada"
          >
            Aceptar
          </button>
          <button
            class="btn-link btn-danger"
            (click)="cambiarEstado(p, false)"
            [disabled]="!p.aceptada"
          >
            Marcar como no aceptada
          </button>
        </td>
      </tr>
      </tbody>
    </table>

    <p class="success-msg" *ngIf="mensaje && postulaciones.length > 0">
      {{ mensaje }}
    </p>

  </div>
</div>
